{"version":3,"file":"menu.js","sources":["../src/constants.js","../src/components/menu/Menu.js"],"sourcesContent":["export const allowMultiple = true;\n\nexport const ALIGN_ENUM = new Set([\n  'tl',\n  'tr',\n  'tc',\n  'bl',\n  'br',\n  'bc',\n  'cl',\n  'cr',\n]);\n","/**\n * Menu Component\n * @author heifade\n */\nimport React, { PureComponent } from 'react';\nimport RcMenu, { Item, SubMenu, ItemGroup } from 'rc-menu';\nimport PropTypes from 'prop-types';\nimport CSSModules from 'react-css-modules';\nimport { allowMultiple } from '../../constants';\nimport styles from './Menu.css';\n\n@CSSModules(styles, { allowMultiple })\nclass Menu extends PureComponent {\n\n  static SubMenu = SubMenu;\n  static Item = Item;\n  static ItemGroup = ItemGroup;\n\n  static displayName = 'Menu'\n\n  static defaultProps = {\n    // className: '',\n    type: 'inline',\n    colorType: 'warm',\n    selectedKeys: [],\n    defaultOpenKeys: [],\n    // openKeys: undefined,\n    onClick: null,\n    // onOpenChange: function() {},\n  }\n\n  // https://facebook.github.io/react/docs/typechecking-with-proptypes.html\n  static propTypes = {\n    // className: PropTypes.string,\n    type: PropTypes.oneOf([\n      'horizontal-h', // 水平菜单，子菜单水平\n      'horizontal-v', // 水平菜单，子菜单垂直\n      'vertical-h', // 垂直菜单，子菜单水平向右弹出\n      'vertical-v', // 垂直菜单，子菜单内嵌在菜单区域\n    ]),\n    colorType: PropTypes.oneOf(['warm', 'cold']),\n    selectedKeys: PropTypes.arrayOf(PropTypes.string),\n    defaultOpenKeys: PropTypes.arrayOf(PropTypes.string),\n    openKeys: PropTypes.arrayOf(PropTypes.string),\n    onClick: PropTypes.func,\n    onOpenChange: PropTypes.func,\n  }\n\n  constructor(props) {\n    super(props);\n\n    let openKeys = null;\n    if ('defaultOpenKeys' in props) {\n      openKeys = props.defaultOpenKeys;\n    } else if ('openKeys' in props) {\n      openKeys = props.openKeys;\n    }\n    this.state = {\n      openKeys: openKeys || [],\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.type === 'vertical-v' && nextProps.type !== 'vertical-v') {\n      this.switchModeFromInline = true;\n    }\n    if ('openKeys' in nextProps) {\n      this.setState({ openKeys: nextProps.openKeys });\n    }\n  }\n\n  setOpenKeys(openKeys) {\n    if (!('openKeys' in this.props)) {\n      this.setState({ openKeys });\n    }\n  }\n  handleOpenChange = (openKeys) => {\n    this.setOpenKeys(openKeys);\n\n    const { onOpenChange } = this.props;\n    if (onOpenChange) {\n      onOpenChange(openKeys);\n    }\n  }\n  handleClick = (e) => {\n    this.setOpenKeys([]);\n    const { onClick } = this.props;\n    if (onClick) {\n      onClick(e);\n    }\n  }\n\n  render() {\n    let props = {};\n    const className = `${this.props.className}`;\n    let mode = '';\n    switch (this.props.type) {\n      case 'horizontal-h':\n        mode = 'horizontal-h';\n        break;\n      case 'horizontal-v':\n        mode = 'horizontal';\n        break;\n      case 'vertical-h':\n        mode = 'vertical';\n        break;\n      case 'vertical-v':\n        mode = 'inline';\n        break;\n      default:\n        break;\n    }\n\n    if (mode === 'inline') { // 垂直菜单，子菜单内嵌在菜单区域。\n      props = {\n        mode,\n      };\n    } else {\n      props = {\n        openKeys: this.state.openKeys,\n        onClick: this.handleClick,\n        onOpenChange: this.handleOpenChange,\n        mode,\n      };\n    }\n    props.className = `color-${this.props.colorType}`;\n    props.styleName = 'menu';\n    props.prefixCls = 'menu';\n    props.inlineIndent = 18;\n\n    return (\n      <RcMenu {...this.props} {...props} />\n    );\n  }\n}\n\n\nexport default Menu;\n"],"names":["allowMultiple","Menu","CSSModules","styles","props","openKeys","defaultOpenKeys","state","nextProps","type","switchModeFromInline","setState","className","mode","handleClick","handleOpenChange","colorType","styleName","prefixCls","inlineIndent","PureComponent","SubMenu","Item","ItemGroup","displayName","defaultProps","propTypes","PropTypes","oneOf","arrayOf","string","func","setOpenKeys","onOpenChange","e","onClick"],"mappings":";;;;;AAAO,IAAMA,gBAAgB,IAAtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACIP,IAQMC,eADLC,WAAWC,MAAX,EAAmB,EAAEH,4BAAF,EAAnB;;;gBAqCaI,KAAZ,EAAmB;;;2GACXA,KADW;;;;QAGbC,WAAW,IAAf;QACI,qBAAqBD,KAAzB,EAAgC;iBACnBA,MAAME,eAAjB;KADF,MAEO,IAAI,cAAcF,KAAlB,EAAyB;iBACnBA,MAAMC,QAAjB;;UAEGE,KAAL,GAAa;gBACDF,YAAY;KADxB;;;;;;8CAKwBG,WAAW;UAC/B,KAAKJ,KAAL,CAAWK,IAAX,KAAoB,YAApB,IAAoCD,UAAUC,IAAV,KAAmB,YAA3D,EAAyE;aAClEC,oBAAL,GAA4B,IAA5B;;UAEE,cAAcF,SAAlB,EAA6B;aACtBG,QAAL,CAAc,EAAEN,UAAUG,UAAUH,QAAtB,EAAd;;;;;gCAIQA,UAAU;UAChB,EAAE,cAAc,KAAKD,KAArB,CAAJ,EAAiC;aAC1BO,QAAL,CAAc,EAAEN,kBAAF,EAAd;;;;;6BAmBK;UACHD,QAAQ,EAAZ;UACMQ,iBAAe,KAAKR,KAAL,CAAWQ,SAAhC;UACIC,OAAO,EAAX;cACQ,KAAKT,KAAL,CAAWK,IAAnB;aACO,cAAL;iBACS,cAAP;;aAEG,cAAL;iBACS,YAAP;;aAEG,YAAL;iBACS,UAAP;;aAEG,YAAL;iBACS,QAAP;;;;;;UAMAI,SAAS,QAAb,EAAuB;;gBACb;;SAAR;OADF,MAIO;gBACG;oBACI,KAAKN,KAAL,CAAWF,QADf;mBAEG,KAAKS,WAFR;wBAGQ,KAAKC,gBAHb;;SAAR;;YAOIH,SAAN,cAA2B,KAAKR,KAAL,CAAWY,SAAtC;YACMC,SAAN,GAAkB,MAAlB;YACMC,SAAN,GAAkB,MAAlB;YACMC,YAAN,GAAqB,EAArB;;aAGE,oBAAC,MAAD,eAAY,KAAKf,KAAjB,EAA4BA,KAA5B,EADF;;;;EAtHegB,wBAEVC,UAAUA,iBACVC,OAAOA,cACPC,YAAYA,mBAEZC,cAAc,gBAEdC,eAAe;;QAEd,QAFc;aAGT,MAHS;gBAIN,EAJM;mBAKH,EALG;;WAOX;;;;;WAKJC,YAAY;;QAEXC,UAAUC,KAAV,CAAgB,CACpB,cADoB;gBAAA;cAAA;cAAA,CAAhB,CAFW;aAQND,UAAUC,KAAV,CAAgB,CAAC,MAAD,EAAS,MAAT,CAAhB,CARM;gBASHD,UAAUE,OAAV,CAAkBF,UAAUG,MAA5B,CATG;mBAUAH,UAAUE,OAAV,CAAkBF,UAAUG,MAA5B,CAVA;YAWPH,UAAUE,OAAV,CAAkBF,UAAUG,MAA5B,CAXO;WAYRH,UAAUI,IAZF;gBAaHJ,UAAUI;;;;OA+B1BhB,mBAAmB,UAACV,QAAD,EAAc;WAC1B2B,WAAL,CAAiB3B,QAAjB;;QAEQ4B,YAHuB,GAGN,OAAK7B,KAHC,CAGvB6B,YAHuB;;QAI3BA,YAAJ,EAAkB;mBACH5B,QAAb;;;;OAGJS,cAAc,UAACoB,CAAD,EAAO;WACdF,WAAL,CAAiB,EAAjB;QACQG,OAFW,GAEC,OAAK/B,KAFN,CAEX+B,OAFW;;QAGfA,OAAJ,EAAa;cACHD,CAAR;;;;;;;"}