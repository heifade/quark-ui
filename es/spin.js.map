{"version":3,"file":"spin.js","sources":["../src/components/spin/Spin.js"],"sourcesContent":["/**\n * Spin Component\n * @author Northerner\n */\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport Animate from 'rc-animate';\nimport styles from './Spin.css';\n\nclass Spin extends PureComponent {\n  static displayName = 'Spin'\n\n  static defaultProps = {\n    size: 'default',\n    spinning: true,\n    delay: 0,\n  }\n\n  // https://facebook.github.io/react/docs/typechecking-with-proptypes.html\n  static propTypes = {\n    size: PropTypes.oneOf([\n      'small',\n      'large',\n      'default',\n    ]),\n    spinning: PropTypes.bool,\n    delay: PropTypes.number,\n  }\n\n  debounceTimeout = null\n  delayTimeout = null\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      spinning: props.spinning,\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const currentSpinning = this.props.spinning;\n    const spinning = nextProps.spinning;\n    const { delay } = this.props;\n\n    if (this.debounceTimeout) {\n      clearTimeout(this.debounceTimeout);\n    }\n    if (currentSpinning && !spinning) {\n      this.debounceTimeout = setTimeout(() => this.setState({ spinning }), 300);\n      if (this.delayTimeout) {\n        clearTimeout(this.delayTimeout);\n      }\n    } else if (spinning && delay && !isNaN(Number(delay))) {\n      this.delayTimeout = setTimeout(() => this.setState({ spinning }), delay);\n    } else {\n      this.setState({ spinning });\n    }\n  }\n\n  isNestedPattern() {\n    return !!(this.props && this.props.children);\n  }\n\n  render() {\n    const { children, size, tip, delay } = this.props;\n    const { spinning } = this.state;\n\n    const spinProps = {\n      className: styles[`Spin ${size === 'default' ? '' : size}`],\n    };\n    const conProps = {\n      className: styles[`qui-spin-container ${spinning ? 'qui-spin-blur' : ''}`],\n      key: 'container',\n    };\n    const spinElement = (\n      <div {...spinProps}>\n        <span className={styles['qui-spin-dot']}>\n          <i />\n          <i />\n          <i />\n          <i />\n          <i />\n        </span>\n        {\n          tip ? <p className={styles['qui-spin-text']}>{tip}</p> : null\n        }\n      </div>\n    );\n\n    if (this.isNestedPattern()) {\n      return (\n        <Animate\n          component=\"div\"\n          transitionName=\"fade\"\n          className={styles['qui-spin-loading-wrap']}\n        >\n          {spinning && <div key={'wrap'} className={styles['qui-spin-wrap']}>{spinElement}</div>}\n          <div {...conProps}>\n            {children}\n          </div>\n        </Animate>\n      );\n    }\n\n    return spinElement;\n  }\n}\n\nexport default Spin;\n"],"names":["Spin","props","debounceTimeout","delayTimeout","state","spinning","nextProps","currentSpinning","delay","setTimeout","setState","isNaN","Number","children","size","tip","spinProps","styles","conProps","spinElement","isNestedPattern","PureComponent","displayName","defaultProps","propTypes","PropTypes","oneOf","bool","number"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,IAKMA;;;gBAuBQC,KAAZ,EAAmB;;;2GACXA,KADW;;UAHnBC,eAGmB,GAHD,IAGC;UAFnBC,YAEmB,GAFJ,IAEI;;UAEZC,KAAL,GAAa;gBACDH,MAAMI;KADlB;;;;;;;;;8CAKwBC,WAAW;;;UAC7BC,kBAAkB,KAAKN,KAAL,CAAWI,QAAnC;UACMA,WAAWC,UAAUD,QAA3B;UACQG,KAH2B,GAGjB,KAAKP,KAHY,CAG3BO,KAH2B;;;UAK/B,KAAKN,eAAT,EAA0B;qBACX,KAAKA,eAAlB;;UAEEK,mBAAmB,CAACF,QAAxB,EAAkC;aAC3BH,eAAL,GAAuBO,WAAW;iBAAM,OAAKC,QAAL,CAAc,EAAEL,kBAAF,EAAd,CAAN;SAAX,EAA8C,GAA9C,CAAvB;YACI,KAAKF,YAAT,EAAuB;uBACR,KAAKA,YAAlB;;OAHJ,MAKO,IAAIE,YAAYG,KAAZ,IAAqB,CAACG,MAAMC,OAAOJ,KAAP,CAAN,CAA1B,EAAgD;aAChDL,YAAL,GAAoBM,WAAW;iBAAM,OAAKC,QAAL,CAAc,EAAEL,kBAAF,EAAd,CAAN;SAAX,EAA8CG,KAA9C,CAApB;OADK,MAEA;aACAE,QAAL,CAAc,EAAEL,kBAAF,EAAd;;;;;sCAIc;aACT,CAAC,EAAE,KAAKJ,KAAL,IAAc,KAAKA,KAAL,CAAWY,QAA3B,CAAR;;;;6BAGO;mBACgC,KAAKZ,KADrC;UACCY,QADD,UACCA,QADD;UACWC,IADX,UACWA,IADX;UACiBC,GADjB,UACiBA,GADjB;UACsBP,KADtB,UACsBA,KADtB;UAECH,QAFD,GAEc,KAAKD,KAFnB,CAECC,QAFD;;;UAIDW,YAAY;mBACLC,kBAAeH,SAAS,SAAT,GAAqB,EAArB,GAA0BA,IAAzC;OADb;UAGMI,WAAW;mBACJD,gCAA6BZ,WAAW,eAAX,GAA6B,EAA1D,EADI;aAEV;OAFP;UAIMc,cACJ;;iBAAA;;;YACQ,WAAWF,OAAO,cAAP,CAAjB;wCAAA;wCAAA;wCAAA;wCAAA;;SADF;cASU;;YAAG,WAAWA,OAAO,eAAP,CAAd;;SAAN,GAAyD;OAV/D;;UAeI,KAAKG,eAAL,EAAJ,EAA4B;eAExB;iBAAA;;uBACY,KADZ;4BAEiB,MAFjB;uBAGaH,OAAO,uBAAP;;sBAEE;;cAAK,KAAK,MAAV,EAAkB,WAAWA,OAAO,eAAP,CAA7B;;WALf;;;oBAME;;;SAPJ;;;aAcKE,WAAP;;;;EA/FeE,uBACVC,cAAc,eAEdC,eAAe;QACd,SADc;YAEV,IAFU;SAGb,CAHa,WAOfC,YAAY;QACXC,UAAUC,KAAV,CAAgB,CACpB,OADoB,EAEpB,OAFoB,EAGpB,SAHoB,CAAhB,CADW;YAMPD,UAAUE,IANH;SAOVF,UAAUG;;;;;"}