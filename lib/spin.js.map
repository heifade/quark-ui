{"version":3,"file":"spin.js","sources":["../src/constants.js","../src/components/spin/Spin.js"],"sourcesContent":["export const allowMultiple = true;\n\nexport const ALIGN_ENUM = new Set([\n  'tl',\n  'tr',\n  'tc',\n  'bl',\n  'br',\n  'bc',\n  'cl',\n  'cr',\n]);\n","/**\n * Spin Component\n * @author Northerner\n */\nimport { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport CSSModules from 'react-css-modules';\nimport Animate from 'rc-animate';\nimport { allowMultiple } from '../../constants';\nimport styles from './Spin.css';\n\n@CSSModules(styles, { allowMultiple })\nclass Spin extends PureComponent {\n\n  static displayName = 'Spin'\n\n  static defaultProps = {\n    size: 'default',\n    spinning: true,\n    delay: 0,\n  }\n\n  // https://facebook.github.io/react/docs/typechecking-with-proptypes.html\n  static propTypes = {\n    size: PropTypes.oneOf([\n      'small',\n      'large',\n      'default',\n    ]),\n    spinning: PropTypes.bool,\n    delay: PropTypes.number,\n  }\n\n  debounceTimeout = null\n  delayTimeout = null\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      spinning: props.spinning,\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const currentSpinning = this.props.spinning;\n    const spinning = nextProps.spinning;\n    const { delay } = this.props;\n\n    if (this.debounceTimeout) {\n      clearTimeout(this.debounceTimeout);\n    }\n    if (currentSpinning && !spinning) {\n      this.debounceTimeout = setTimeout(() => this.setState({ spinning }), 300);\n      if (this.delayTimeout) {\n        clearTimeout(this.delayTimeout);\n      }\n    } else if (spinning && delay && !isNaN(Number(delay))) {\n      this.delayTimeout = setTimeout(() => this.setState({ spinning }), delay);\n    } else {\n      this.setState({ spinning });\n    }\n  }\n\n  isNestedPattern() {\n    return !!(this.props && this.props.children);\n  }\n\n  render() {\n    const { children, size, tip, delay } = this.props;\n    const { spinning } = this.state;\n\n    const spinProps = {\n      styleName: `Spin ${size === 'default' ? '' : size}`,\n    };\n    const conProps = {\n      styleName: `qui-spin-container ${spinning ? 'qui-spin-blur' : ''}`,\n    };\n    const spinElement = (\n      <div {...spinProps}>\n        <span styleName={'qui-spin-dot'}>\n          <i />\n          <i />\n          <i />\n          <i />\n          <i />\n        </span>\n        {\n          tip ? <p styleName={'qui-spin-text'}>{tip}</p> : null\n        }\n      </div>\n    );\n\n    if (this.isNestedPattern()) {\n      return (\n        <Animate\n          component=\"div\"\n          transitionName=\"fade\"\n          styleName={'qui-spin-loading-wrap'}\n        >\n          {spinning && <div styleName={'qui-spin-wrap'}>{spinElement}</div>}\n          <div {...conProps}>\n            {children}\n          </div>\n        </Animate>\n      );\n    }\n\n    return spinElement;\n  }\n}\n\nexport default Spin;\n"],"names":["allowMultiple","Spin","CSSModules","styles","props","debounceTimeout","delayTimeout","state","spinning","nextProps","currentSpinning","delay","setTimeout","setState","isNaN","Number","children","size","tip","spinProps","conProps","spinElement","isNestedPattern","PureComponent","displayName","defaultProps","propTypes","PropTypes","oneOf","bool","number"],"mappings":";;;;;;;;;AAAO,IAAMA,gBAAgB,IAAtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACIP,IAQMC,eADLC,WAAWC,MAAX,EAAmB,EAAEH,4BAAF,EAAnB;;;gBAyBaI,KAAZ,EAAmB;;;2GACXA,KADW;;UAHnBC,eAGmB,GAHD,IAGC;UAFnBC,YAEmB,GAFJ,IAEI;;UAEZC,KAAL,GAAa;gBACDH,MAAMI;KADlB;;;;;;;;;8CAKwBC,WAAW;;;UAC7BC,kBAAkB,KAAKN,KAAL,CAAWI,QAAnC;UACMA,WAAWC,UAAUD,QAA3B;UACQG,KAH2B,GAGjB,KAAKP,KAHY,CAG3BO,KAH2B;;;UAK/B,KAAKN,eAAT,EAA0B;qBACX,KAAKA,eAAlB;;UAEEK,mBAAmB,CAACF,QAAxB,EAAkC;aAC3BH,eAAL,GAAuBO,WAAW;iBAAM,OAAKC,QAAL,CAAc,EAAEL,kBAAF,EAAd,CAAN;SAAX,EAA8C,GAA9C,CAAvB;YACI,KAAKF,YAAT,EAAuB;uBACR,KAAKA,YAAlB;;OAHJ,MAKO,IAAIE,YAAYG,KAAZ,IAAqB,CAACG,MAAMC,OAAOJ,KAAP,CAAN,CAA1B,EAAgD;aAChDL,YAAL,GAAoBM,WAAW;iBAAM,OAAKC,QAAL,CAAc,EAAEL,kBAAF,EAAd,CAAN;SAAX,EAA8CG,KAA9C,CAApB;OADK,MAEA;aACAE,QAAL,CAAc,EAAEL,kBAAF,EAAd;;;;;sCAIc;aACT,CAAC,EAAE,KAAKJ,KAAL,IAAc,KAAKA,KAAL,CAAWY,QAA3B,CAAR;;;;6BAGO;mBACgC,KAAKZ,KADrC;UACCY,QADD,UACCA,QADD;UACWC,IADX,UACWA,IADX;UACiBC,GADjB,UACiBA,GADjB;UACsBP,KADtB,UACsBA,KADtB;UAECH,QAFD,GAEc,KAAKD,KAFnB,CAECC,QAFD;;;UAIDW,YAAY;8BACGF,SAAS,SAAT,GAAqB,EAArB,GAA0BA,IAA7C;OADF;UAGMG,WAAW;4CACkBZ,WAAW,eAAX,GAA6B,EAA9D;OADF;UAGMa,cACJ;;iBAAA;;;YACQ,WAAW,cAAjB;wCAAA;wCAAA;wCAAA;wCAAA;;SADF;cASU;;YAAG,WAAW,eAAd;;SAAN,GAAiD;OAVvD;;UAeI,KAAKC,eAAL,EAAJ,EAA4B;eAExB;iBAAA;;uBACY,KADZ;4BAEiB,MAFjB;uBAGa;;sBAEE;;cAAK,WAAW,eAAhB;;WALf;;;oBAME;;;SAPJ;;;aAcKD,WAAP;;;;EA/FeE,8BAEVC,cAAc,gBAEdC,eAAe;QACd,SADc;YAEV,IAFU;SAGb,CAHa,YAOfC,YAAY;QACXC,UAAUC,KAAV,CAAgB,CACpB,OADoB,EAEpB,OAFoB,EAGpB,SAHoB,CAAhB,CADW;YAMPD,UAAUE,IANH;SAOVF,UAAUG;;;;;"}